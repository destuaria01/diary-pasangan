<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Diary Pasangan Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#22c55e">
<style>
:root{
--bg:#ecfdf5;
--card:#ffffff;
--accent:#22c55e;
--accent2:#38f9d7;
--text:#064e3b;
--shadow:0 10px 25px rgba(0,0,0,.12);
--radius:18px;
}
*{box-sizing:border-box;font-family:system-ui}
body{margin:0;background:linear-gradient(135deg,#ecfeff,#fce7f3,#ecfdf5);color:var(--text)}
.container{max-width:480px;margin:auto;padding:14px}
.card{background:var(--card);border-radius:var(--radius);padding:16px;margin-bottom:14px;box-shadow:var(--shadow)}
h2{margin-top:0}
input,select,textarea,button{
width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;margin-top:8px;font-size:15px
}
textarea{resize:none}
button{
border:none;background:linear-gradient(135deg,var(--accent),var(--accent2));
color:#fff;font-weight:700;cursor:pointer
}
.secondary{background:#e5e7eb;color:#000}
.time{font-size:12px;opacity:.7}
.hidden{display:none}
.badge{
display:inline-block;padding:6px 14px;border-radius:999px;
background:linear-gradient(135deg,var(--accent),var(--accent2));
color:#fff;font-weight:700;font-size:13px
}
img{max-width:100%;border-radius:12px;margin-top:8px}
</style>
</head>

<body>
<div class="container">

<div class="card" style="text-align:center">
<div class="badge">DIARY PASANGAN PREMIUM</div>
<div id="clock" class="time"></div>
</div>

<div id="loginCard" class="card">
<h2>ğŸ” Login</h2>
<select id="role">
<option value="a">Pasangan A</option>
<option value="b">Pasangan B</option>
</select>
<input id="pin" type="password" placeholder="PIN">
<button onclick="login()">Masuk</button>
</div>

<div id="app" class="hidden">

<div class="card">
<h2>ğŸ‘« Profil</h2>
<input id="nameA" placeholder="Nama Pasangan A">
<input id="nameB" placeholder="Nama Pasangan B">
<button onclick="saveProfile()">Simpan</button>
</div>

<div class="card">
<h2>ğŸ”‘ Ganti PIN</h2>
<input id="newPinA" placeholder="PIN Baru A">
<input id="newPinB" placeholder="PIN Baru B">
<button onclick="changePin()">Ganti PIN</button>
</div>

<div class="card">
<h2>ğŸ“ Absensi Keluar / Pulang</h2>
<button onclick="absen('keluar')">Keluar</button>
<button onclick="absen('pulang')">Pulang</button>
<div id="absenLog"></div>
</div>

<div class="card">
<h2>ğŸ“· Upload Foto Aktivitas</h2>
<input type="file" accept="image/*" onchange="uploadPhoto(event)">
<div id="photos"></div>
</div>

<div class="card">
<h2>ğŸ’Œ Diary Pesan</h2>
<textarea id="msg" placeholder="Tulis pesan..."></textarea>
<button onclick="sendMsg()">Kirim</button>
<div id="messages"></div>
</div>

<div class="card">
<h2>â¤ï¸ Mode Romantis</h2>
<button onclick="romantis()">Aktifkan</button>
<div id="romanticStatus"></div>
</div>

<div class="card">
<h2>ğŸ’¾ Backup & Restore</h2>
<button onclick="backup()">Backup</button>
<input type="file" onchange="restore(event)">
</div>

<button class="secondary" onclick="logout()">Keluar</button>
</div>

</div>

<script>
let data=JSON.parse(localStorage.getItem("diary2"))||{
pin:{a:"1111",b:"2222"},
profile:{a:"",b:""},
absen:[],
photos:[],
messages:[],
romantic:false
};
function save(){localStorage.setItem("diary2",JSON.stringify(data));}
function login(){
if(data.pin[role.value]===pin.value){
loginCard.classList.add("hidden");
app.classList.remove("hidden");
nameA.value=data.profile.a;
nameB.value=data.profile.b;
render();
}else alert("PIN salah");
}
function logout(){location.reload()}
function saveProfile(){
data.profile.a=nameA.value;
data.profile.b=nameB.value;
save();alert("Profil disimpan");
}
function changePin(){
if(newPinA.value)data.pin.a=newPinA.value;
if(newPinB.value)data.pin.b=newPinB.value;
save();alert("PIN diganti");
}
function absen(type){
navigator.geolocation.getCurrentPosition(pos=>{
data.absen.unshift({
type,time:new Date().toLocaleString(),
loc:pos.coords.latitude.toFixed(4)+","+pos.coords.longitude.toFixed(4)
});
save();render();
});
}
function uploadPhoto(e){
const r=new FileReader();
r.onload=()=>{data.photos.unshift(r.result);save();render()};
r.readAsDataURL(e.target.files[0]);
}
function sendMsg(){
if(!msg.value)return;
data.messages.unshift({text:msg.value,time:new Date().toLocaleString()});
msg.value="";save();render();
}
function romantis(){
data.romantic=!data.romantic;
save();render();
}
function render(){
absenLog.innerHTML=data.absen.map(a=>`<div class="time">${a.type} | ${a.time}<br>ğŸ“${a.loc}</div>`).join("");
photos.innerHTML=data.photos.map(p=>`<img src="${p}">`).join("");
messages.innerHTML=data.messages.map(m=>`<div>${m.text}<div class="time">${m.time}</div></div>`).join("");
romanticStatus.innerHTML=data.romantic?"ğŸ’– Mode Romantis Aktif":"â€”";
}
setInterval(()=>clock.innerText=new Date().toLocaleTimeString(),1000);
function backup(){
const a=document.createElement("a");
a.href=URL.createObjectURL(new Blob([JSON.stringify(data)]));
a.download="backup-diary.json";a.click();
}
function restore(e){
const r=new FileReader();
r.onload=()=>{localStorage.setItem("diary2",r.result);location.reload()};
r.readAsText(e.target.files[0]);
}
</script>
</body>
</html>
